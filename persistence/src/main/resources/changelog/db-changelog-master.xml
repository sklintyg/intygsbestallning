<databaseChangeLog
      xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

  <changeSet id="1" author="joakim anell">

    <createTable tableName="BESTALLNING">
      <column name="ID" type="bigint" autoIncrement="true" startWith="1" incrementBy="1">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="ANKOMST_DATUM" type="datetime">
        <constraints nullable="false"/>
      </column>
      <column name="AVSLUT_DATUM" type="datetime">
        <constraints nullable="true"/>
      </column>
      <column name="STATUS" type="varchar(64)">
        <constraints nullable="false"/>
      </column>
      <column name="VARDENHET_ID" type="bigint">
        <constraints nullable="true"/>
      </column>
    </createTable>

    <createTable tableName="VARDENHET">
      <column name="ID" type="bigint" autoIncrement="true" startWith="1" incrementBy="1">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="ENHET_NAMN" type="varchar(64)">
        <constraints nullable="false"/>
      </column>
      <column name="EPOST" type="varchar(64)">
        <constraints nullable="true"/>
      </column>
      <column name="STANDARD_SVAR" type="varchar(64)">
        <constraints nullable="true"/>
      </column>
    </createTable>

    <createTable tableName="HANDELSE">
      <column name="ID" type="bigint" autoIncrement="true" startWith="1" incrementBy="1">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="BESTALLNING_ID" type="bigint">
        <constraints nullable="false"/>
      </column>
      <column name="EVENT" type="varchar(64)">
        <constraints nullable="false"/>
      </column>
      <column name="SKAPAD" type="datetime">
        <constraints nullable="false"/>
      </column>
      <column name="ANVANDARE" type="varchar(64)">
        <constraints nullable="true"/>
      </column>
      <column name="BESKRIVNING" type="varchar(64)">
        <constraints nullable="false"/>
      </column>
      <column name="KOMMENTAR" type="varchar(64)">
        <constraints nullable="true"/>
      </column>
    </createTable>

    <addForeignKeyConstraint
          baseColumnNames="BESTALLNING_ID"
          baseTableName="HANDELSE"
          constraintName="HANDELSE_BESTALLNING_FK"
          referencedColumnNames="ID"
          referencedTableName="BESTALLNING"/>

  </changeSet>

  <changeSet id="2" author="cf">
    <createTable tableName="NOTIFIERING">
      <column name="ID" type="bigint" incrementBy="1" startWith="1">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="BESTALLNING_ID" type="bigint">
        <constraints nullable="false"/>
      </column>
      <column name="TYP" type="varchar(64)">
        <constraints nullable="false"/>
      </column>
      <column name="MOTTAGARE" type="varchar(64)">
        <constraints nullable="false"/>
      </column>
      <column name="SKICKAD" type="datetime">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint
        baseTableName="NOTIFIERING"
        baseColumnNames="BESTALLNING_ID"
        constraintName="NOTIFIERING_BESTALLNING_FK"
        referencedTableName="BESTALLNING"
        referencedColumnNames="ID"/>

    <createIndex indexName="NOTIFIERING_TYP_IDX"
        tableName="NOTIFIERING" unique="false">
      <column name="TYP"/>
    </createIndex>

  </changeSet>

</databaseChangeLog>
